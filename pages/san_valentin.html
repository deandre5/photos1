<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carta de San Valentín</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&family=Dancing+Script:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../media/styles.css">

    <style>
        /* Contenedor principal de la carta */
        .letter-container {
            background-color: #f8f4ed;
            padding: 2.5rem;
            /* Padding reducido para más espacio vertical */
            max-width: 800px;
            width: 100%;
            position: relative;
            line-height: 1.7;
            color: #3d3d3d;
            font-family: 'Caveat', cursive;
            box-shadow:
                inset 0 0 25px rgba(0, 0, 0, 0.10),
                inset 8px 8px 20px rgba(0, 0, 0, 0.07),
                inset -8px -8px 20px rgba(0, 0, 0, 0.07),
                inset 15px 0px 30px rgba(0, 0, 0, 0.04),
                inset -15px 0px 30px rgba(0, 0, 0, 0.04),
                0 15px 30px rgba(0, 0, 0, 0.25);
            border-radius: 15px;
            transform: rotateZ(0.7deg);
            filter: sepia(0.2) contrast(1.1) brightness(1.05);
            background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZmlsdGVlciBpZD0ibm9pc2UiPgogICAgPGZlVHVyYmVsZW5jZSB0eXBlPSJmcmFjdGFsTm9pc2UiIGJhc2VGcmVxdWVuY3k9IjAuNzUiIG51bU9jdGF2ZXM9IjIiIGNvbG9yQ29tcG9uZW50cz0ic0QiIHN0aXRjaFRpbGVzPSJzdGl0Y2giLz4KICAgIDxmZUNvbG9yTWF0cml4IHR5cGU9InNhdHVyYXRlIiB2YWx1ZXM9IjAiLz4KICAgIDxmZUNvbXBvc2l0ZSBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJ0ZXh0dXJlIiBvcGVyYXRvcj0ibGlnaHRlbiIgcmVzdWx0PSJub2lzZU91dCIvPgogIDwvZmlsdGVyPgogIDxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNmOGY0ZWQiIGZpbHRlcj0idXJsKCNub2lzZSkiLz4KPC9zdmc+');
            background-size: cover;
            background-blend-mode: multiply;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            /* Se eliminó 'max-height: 98vh;' para permitir que el contenido se ajuste */
        }




        /* Media queries para ajustar el tamaño de la fuente en pantallas pequeñas */
        @media (max-width: 768px) {


            .letter-container {
                padding: 1rem;
                /* Padding más pequeño en móviles */
                font-size: 0.8rem;
                border-radius: 8px;
            }

        }

        @media (max-width: 480px) {
            .letter-container {
                padding: 0.8rem;
            }

        }
    </style>
</head>

<body class="antialiased">
    <div class="letter-container">
        <h1 class="title-style">Mi amor,</h1>

        <div id="imageCarousel" class="relative w-full max-w-xl mx-auto my-4 rounded-lg overflow-hidden shadow-lg">
            <div class="carousel-images relative w-full h-64 md:h-80 lg:h-96">
                <img src="../images/primer san valentin/san_valentin_1.webp" alt="Imagen de Amor 1" class="active">
                <img src="../images/primer san valentin/san_valentin_2.webp" alt="Imagen de Amor 2">
                <img src="../images/primer san valentin/san_valentin_3.webp" alt="Imagen de Amor 3">
                <img src="../images/primer san valentin/san_valentin_4.webp" alt="Imagen de Amor 4">
            </div>
            <button id="prevBtn"
                class="absolute top-1/2 left-2 -translate-y-1/2 bg-white bg-opacity-75 p-2 rounded-full shadow-md focus:outline-none z-10 cursor-pointer">
                <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
            </button>
            <button id="nextBtn"
                class="absolute top-1/2 right-2 -translate-y-1/2 bg-white bg-opacity-75 p-2 rounded-full shadow-md focus:outline-none z-10 cursor-pointer">
                <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </button>
            <div id="carouselDots"
                class="carousel-dots absolute bottom-2 left-0 right-0 flex justify-center space-x-2 z-10">
            </div>
        </div>

        <div class="letter-text-overlay" id="letterTextOverlay">
            <p class="mb-4">
                Siento mucho haber perdido la primera carta que te escribí. No recuerdo cada palabra, pero sí lo
                especial
                que fue para mí. Recuerdo que me habías contado que te gustaban las series de época y me puse a
                investigar
                cómo hacer cartas que parecieran antiguas. Quemé el papel varias veces y tardé una eternidad, casi me
                rindo
                porque no me terminaban de convencer.
            </p>
            <p class="mb-4">
                Después de mucho esfuerzo, por fin logré una carta que, aunque no era perfecta, reflejaba a la
                perfección lo
                que siento por ti, lo que provocas en mí.
            </p>
            <p class="mb-4">
                Mientras la escribía, y con el pasar del tiempo, me di cuenta de algo tan loco: siempre estuve enamorado
                de
                ti. Desde el primer día en que te vi, durante esos meses que no nos vimos y ahora. Eres mi primer amor y
                espero que el único. Tus besos me llenan completamente el alma y cuando estoy contigo siento que no
                necesito
                nada más. Por ti me esfuerzo cada día, me he vuelto una mejor persona y, aunque peleemos a veces
                (bastante
                últimamente), ni por un momento he pensado que abandonar el barco sea la mejor opción. Eres alguien a
                quien,
                aunque viviera mil vidas más, volvería a conocer. Eres divertida, inteligente, capaz y hermosa. Tienes
                las
                cualidades más increíbles que he visto en un ser humano. Cuando te veo, mi pecho se llena de felicidad,
                eres
                y serás el motivo de mi sonrisa. Espero que la vida nos permita seguir disfrutando de esta aventura tan
                bella.
            </p>
        </div>
        <p class="signature-style">Con todo mi amor</p>

        <button onclick="history.back()" class="back-button">
            Volver a la página anterior
        </button>
    </div>

    <script>
        // Espera a que el DOM esté completamente cargado antes de ejecutar el script
        document.addEventListener('DOMContentLoaded', function () {
            // --- Lógica del Carrusel de Imágenes ---
            const carouselImagesContainer = document.querySelector('.carousel-images');
            const images = carouselImagesContainer.querySelectorAll('img');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const carouselDotsContainer = document.getElementById('carouselDots');

            let currentIndex = 0;
            let autoSlideInterval;
            const slideIntervalTime = 3000; // 3 segundos para el auto-deslizamiento

            /**
             * Muestra la imagen en el índice especificado y actualiza los puntos de paginación.
             * @param {number} index El índice de la imagen a mostrar.
             */
            function showImage(index) {
                // Oculta todas las imágenes y remueve la clase 'active'
                images.forEach((img, i) => {
                    img.classList.remove('active');
                    // Remueve la clase 'active' de los puntos de paginación
                    if (carouselDotsContainer.children[i]) {
                        carouselDotsContainer.children[i].classList.remove('active');
                    }
                });

                // Asegura que el índice esté dentro de los límites
                if (index >= images.length) {
                    currentIndex = 0;
                } else if (index < 0) {
                    currentIndex = images.length - 1;
                } else {
                    currentIndex = index;
                }

                // Muestra la imagen actual y añade la clase 'active'
                images[currentIndex].classList.add('active');
                // Añade la clase 'active' al punto de paginación correspondiente
                if (carouselDotsContainer.children[currentIndex]) {
                    carouselDotsContainer.children[currentIndex].classList.add('active');
                }
            }

            /**
             * Avanza a la siguiente imagen en el carrusel.
             */
            function nextImage() {
                showImage(currentIndex + 1);
            }

            /**
             * Retrocede a la imagen anterior en el carrusel.
             */
            function prevImage() {
                showImage(currentIndex - 1);
            }

            /**
             * Inicia el auto-deslizamiento del carrusel.
             */
            function startAutoSlide() {
                autoSlideInterval = setInterval(nextImage, slideIntervalTime);
            }

            /**
             * Detiene el auto-deslizamiento del carrusel.
             */
            function stopAutoSlide() {
                clearInterval(autoSlideInterval);
            }

            // Genera los puntos de paginación dinámicamente
            images.forEach((_, i) => {
                const dot = document.createElement('div');
                dot.classList.add('carousel-dot');
                dot.addEventListener('click', () => {
                    stopAutoSlide(); // Detiene el auto-deslizamiento al hacer clic en un punto
                    showImage(i);
                    startAutoSlide(); // Reinicia el auto-deslizamiento
                });
                carouselDotsContainer.appendChild(dot);
            });

            // Event listeners para los botones de navegación
            prevBtn.addEventListener('click', () => {
                stopAutoSlide(); // Detiene el auto-deslizamiento al hacer clic
                prevImage();
                startAutoSlide(); // Reinicia el auto-deslizamiento
            });

            nextBtn.addEventListener('click', () => {
                stopAutoSlide(); // Detiene el auto-deslizamiento al hacer clic
                nextImage();
                startAutoSlide(); // Reinicia el auto-deslizamiento
            });

            // Muestra la primera imagen al cargar y comienza el auto-deslizamiento
            showImage(currentIndex);
            startAutoSlide();

            // --- Lógica existente para el efecto de brillo de caracteres ---
            const letterTextOverlay = document.getElementById('letterTextOverlay');
            const paragraphs = letterTextOverlay.querySelectorAll('p');

            /**
             * Envuelve los caracteres 'T' y 'E' (mayúsculas o minúsculas)
             * con una etiqueta <span> que tiene la clase 'highlight-char'.
             * @param {string} text El texto a procesar.
             * @returns {string} El texto con los caracteres envueltos en <span>.
             */
            function wrapCharacters(text) {
                return text.replace(/([TE])/gi, '<span class="highlight-char">$1</span>');
            }

            paragraphs.forEach(p => {
                p.innerHTML = wrapCharacters(p.innerHTML);
            });

            // Establece un temporizador para añadir el efecto de brillo después de 10 segundos
            setTimeout(() => {
                const highlightChars = document.querySelectorAll('.highlight-char');
                highlightChars.forEach(char => {
                    char.classList.add('glow-effect');
                });
            }, 10000); // 10000 milisegundos = 10 segundos

            // Establece un temporizador para modificar el texto después de 5 minutos (300 segundos)
            setTimeout(() => {
                const letterTextOverlay = document.getElementById('letterTextOverlay');
                letterTextOverlay.innerHTML = '';

                const finalLettersContainer = document.createElement('div');
                finalLettersContainer.style.display = 'flex';
                finalLettersContainer.style.justifyContent = 'center';
                finalLettersContainer.style.alignItems = 'center';
                finalLettersContainer.style.width = '100%';
                finalLettersContainer.style.height = '100%';
                finalLettersContainer.style.fontSize = '8rem';
                finalLettersContainer.style.fontWeight = 'bold';
                finalLettersContainer.style.color = '#3a3a3a';
                finalLettersContainer.style.gap = '40px';

                const tSpan = document.createElement('span');
                tSpan.textContent = 'T';

                const eSpan = document.createElement('span');
                eSpan.textContent = 'E';

                finalLettersContainer.appendChild(tSpan);
                finalLettersContainer.appendChild(eSpan);

                letterTextOverlay.appendChild(finalLettersContainer);

                letterTextOverlay.style.display = 'flex';
                letterTextOverlay.style.justifyContent = 'center';
                letterTextOverlay.style.alignItems = 'center';
            }, 300000); // 300000 milisegundos = 5 minutos
        });
    </script>
</body>

</html>