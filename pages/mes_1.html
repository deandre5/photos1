<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carta del Mes 1</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&family=Dancing+Script:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../media/styles.css">

    <style>
        /* Estilo para el contenedor principal de la carta */
        .letter-container {
            background-color: #fffaf0;
            /* Blanco crema más suave para el papel de la carta */
            background-image: url('https://www.transparenttextures.com/patterns/paper-fibers.png');
            /* Textura de papel sutil */
            border: 2px solid #c2a88a;
            /* Borde más pronunciado y antiguo */
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.25);
            /* Sombra más profunda para darle más relieve */
            position: relative;
            /* Para posicionar las imágenes de forma absoluta */
            max-width: 850px;
            /* Ancho máximo ligeramente mayor */
            width: 95%;
            /* Ocupa casi todo el ancho disponible */
            padding: 2rem;
            /* Relleno interno de la carta, ajustado para no scroll */
            box-sizing: border-box;
            /* Incluye padding y border en el ancho/alto */
            border-radius: 15px;
            /* Bordes más redondeados para un toque más suave */
            /* Se eliminó 'overflow: hidden;' para permitir que el contenido se ajuste */
            /* Se eliminó 'max-height: 98vh;' para permitir que el contenido se ajuste */
            display: flex;
            /* Usamos flexbox para la pila vertical de contenido */
            flex-direction: column;
            /* Distribuye el espacio entre los elementos */
            justify-content: space-between;
        }





        /* Media queries para ajustar el tamaño de la fuente en pantallas pequeñas */
        @media (max-width: 768px) {
            body {
                padding: 0.5rem;
                /* Más espacio en los bordes para móviles */
            }

            .letter-container {
                padding: 1rem;
                /* Padding más pequeño en móviles */
            }
        }

        @media (max-width: 480px) {
            .letter-container {
                padding: 0.8rem;
            }
        }
    </style>
</head>

<body>
    <div class="letter-container">
        <h1 class="title-style">Mi pulguita Hermosa,</h1>

        <div id="imageCarousel" class="relative w-full max-w-xl mx-auto my-4 rounded-lg overflow-hidden shadow-lg">
            <div class="carousel-images relative w-full h-64 md:h-80 lg:h-96">
                <img src="../images/mes1/mes1.webp" alt="Imagen de Amor Mes 1 - 1" class="active">
                <img src="../images/mes1/mes2.webp" alt="Imagen de Amor Mes 1 - 2">
                <img src="../images/mes1/mes3.webp" alt="Imagen de Amor Mes 1 - 3">
                <img src="../images/mes1/mes4.webp" alt="Imagen de Amor Mes 1 - 4">
                <img src="../images/mes1/mes5.webp" alt="Imagen de Amor Mes 1 - 5">

            </div>
            <button id="prevBtn"
                class="absolute top-1/2 left-2 -translate-y-1/2 bg-white bg-opacity-75 p-2 rounded-full shadow-md focus:outline-none z-10 cursor-pointer">
                <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
            </button>
            <button id="nextBtn"
                class="absolute top-1/2 right-2 -translate-y-1/2 bg-white bg-opacity-75 p-2 rounded-full shadow-md focus:outline-none z-10 cursor-pointer">
                <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </button>
            <div id="carouselDots"
                class="carousel-dots absolute bottom-2 left-0 right-0 flex justify-center space-x-2 z-10">
            </div>
        </div>

        <div class="letter-text-overlay" id="letterTextOverlay">
            <p>Ha pasado 1 mes desde que nos dimos esta oportunidad tan hermosa y 3 meses desde que te volví a ver.
                Parece que fue ayer cuando te vi por primera vez. Ese momento quedó grabado en mi mente.</p>

            <p>Aunque la vida nos separó por un tiempo, ni un solo día dejaste de estar en mis pensamientos. Eras mi
                constante, ese recuerdo imborrable que me hacía suspirar.</p>

            <p>Tenerte de nuevo en mi vida me genera una alegría inmensa. Me prometí a mí mismo que no te dejaría ir sin
                darlo todo de mí, que trabajaría cada día para ser el hombre que te mereces porque tú eres alguien
                increíble: inteligente, fuerte, valiente y para mí la mujer más hermosa y maravillosa que mis ojos han
                visto.</p>

            <p>Cuando estoy contigo el mundo se desvanece, solo somos tú y yo. Tu sonrisa tiene la calidez del sol y tu
                mirada... tu mirada es mi mayor tesoro.</p>

            <p>Este último mes ha sido un regalo, un recordatorio constante de lo afortunado que soy de tenerte.</p>
            <p>Gracias mi pulguita por estar a mi lado, por llenar mi vida de felicidad. Espero con ansias todos los
                meses, años y vidas que nos quedan por compartir. </p>
        </div>
        <p class="signature-style">Te amo mi pulguita aventurera.</p>

        <button onclick="history.back()" class="back-button">
            Volver a la página anterior
        </button>
    </div>

    <script>
        // Espera a que el DOM esté completamente cargado antes de ejecutar el script
        document.addEventListener('DOMContentLoaded', function () {
            // --- Lógica del Carrusel de Imágenes ---
            const carouselImagesContainer = document.querySelector('.carousel-images');
            const images = carouselImagesContainer.querySelectorAll('img');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const carouselDotsContainer = document.getElementById('carouselDots');

            let currentIndex = 0;
            let autoSlideInterval;
            const slideIntervalTime = 3000; // 3 segundos para el auto-deslizamiento

            /**
             * Muestra la imagen en el índice especificado y actualiza los puntos de paginación.
             * @param {number} index El índice de la imagen a mostrar.
             */
            function showImage(index) {
                // Oculta todas las imágenes y remueve la clase 'active'
                images.forEach((img, i) => {
                    img.classList.remove('active');
                    // Remueve la clase 'active' de los puntos de paginación
                    if (carouselDotsContainer.children[i]) {
                        carouselDotsContainer.children[i].classList.remove('active');
                    }
                });

                // Asegura que el índice esté dentro de los límites
                if (index >= images.length) {
                    currentIndex = 0;
                } else if (index < 0) {
                    currentIndex = images.length - 1;
                } else {
                    currentIndex = index;
                }

                // Muestra la imagen actual y añade la clase 'active'
                images[currentIndex].classList.add('active');
                // Añade la clase 'active' al punto de paginación correspondiente
                if (carouselDotsContainer.children[currentIndex]) {
                    carouselDotsContainer.children[currentIndex].classList.add('active');
                }
            }

            /**
             * Avanza a la siguiente imagen en el carrusel.
             */
            function nextImage() {
                showImage(currentIndex + 1);
            }

            /**
             * Retrocede a la imagen anterior en el carrusel.
             */
            function prevImage() {
                showImage(currentIndex - 1);
            }

            /**
             * Inicia el auto-deslizamiento del carrusel.
             */
            function startAutoSlide() {
                autoSlideInterval = setInterval(nextImage, slideIntervalTime);
            }

            /**
             * Detiene el auto-deslizamiento del carrusel.
             */
            function stopAutoSlide() {
                clearInterval(autoSlideInterval);
            }

            // Genera los puntos de paginación dinámicamente
            images.forEach((_, i) => {
                const dot = document.createElement('div');
                dot.classList.add('carousel-dot');
                dot.addEventListener('click', () => {
                    stopAutoSlide(); // Detiene el auto-deslizamiento al hacer clic en un punto
                    showImage(i);
                    startAutoSlide(); // Reinicia el auto-deslizamiento
                });
                carouselDotsContainer.appendChild(dot);
            });

            // Event listeners para los botones de navegación
            prevBtn.addEventListener('click', () => {
                stopAutoSlide(); // Detiene el auto-deslizamiento al hacer clic
                prevImage();
                startAutoSlide(); // Reinicia el auto-deslizamiento
            });

            nextBtn.addEventListener('click', () => {
                stopAutoSlide(); // Detiene el auto-deslizamiento al hacer clic
                nextImage();
                startAutoSlide(); // Reinicia el auto-deslizamiento
            });

            // Muestra la primera imagen al cargar y comienza el auto-deslizamiento
            showImage(currentIndex);
            startAutoSlide();

            // --- Lógica existente para el efecto de brillo de caracteres ---
            const letterTextOverlay = document.getElementById('letterTextOverlay');
            const paragraphs = letterTextOverlay.querySelectorAll('p');

            /**
             * Envuelve los caracteres 'C' y 'A' (mayúsculas o minúsculas)
             * con una etiqueta <span> que tiene la clase 'highlight-char'.
             * @param {string} text El texto a procesar.
             * @returns {string} El texto con los caracteres envueltos en <span>.
             */
            function wrapCharacters(text) {
                return text.replace(/([CA])/gi, '<span class="highlight-char">$1</span>');
            }

            paragraphs.forEach(p => {
                p.innerHTML = wrapCharacters(p.innerHTML);
            });

            // Establece un temporizador para añadir el efecto de brillo después de 10 segundos
            setTimeout(() => {
                const highlightChars = document.querySelectorAll('.highlight-char');
                highlightChars.forEach(char => {
                    char.classList.add('glow-effect');
                });
            }, 10000); // 10000 milisegundos = 10 segundos

            // Establece un temporizador para modificar el texto después de 5 minutos (300 segundos)
            setTimeout(() => {
                const letterTextOverlay = document.getElementById('letterTextOverlay');
                letterTextOverlay.innerHTML = '';

                const finalLettersContainer = document.createElement('div');
                finalLettersContainer.style.display = 'flex';
                finalLettersContainer.style.justifyContent = 'center';
                finalLettersContainer.style.alignItems = 'center';
                finalLettersContainer.style.width = '100%';
                finalLettersContainer.style.height = '100%';
                finalLettersContainer.style.fontSize = '8rem';
                finalLettersContainer.style.fontWeight = 'bold';
                finalLettersContainer.style.color = '#3a3a3a';
                finalLettersContainer.style.gap = '40px';

                const tSpan = document.createElement('span');
                tSpan.textContent = 'T';

                const eSpan = document.createElement('span');
                eSpan.textContent = 'E ';

                const cSpan = document.createElement('span');
                cSpan.textContent = 'C';

                const aSpan = document.createElement('span');
                aSpan.textContent = 'A';

                finalLettersContainer.appendChild(tSpan);
                finalLettersContainer.appendChild(eSpan);
                finalLettersContainer.appendChild(cSpan);
                finalLettersContainer.appendChild(aSpan);

                letterTextOverlay.appendChild(finalLettersContainer);

                letterTextOverlay.style.display = 'flex';
                letterTextOverlay.style.justifyContent = 'center';
                letterTextOverlay.style.alignItems = 'center';
            }, 300000); // 300000 milisegundos = 5 minutos
        });
    </script>
</body>

</html>